const{cmd}=require('../command');//Fixed&CreatedByJawadTechXcmd({pattern:"hidetag",alias:["tag","h"],react:"ğŸ”Š",desc:"ToTagallMembersforAnyMessage/Media",category:"group",use:'.hidetagHello',filename:__filename},async(conn,mek,m,{from,q,isGroup,isCreator,isAdmins,participants,reply})=>{try{constisUrl=(url)=>{return/https?:\/\/(www\.)?[\w\-@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([\w\-@:%_\+.~#?&//=]*)/.test(url);};if(!isGroup)returnreply("âŒThiscommandcanonlybeusedingroups.");if(!isAdmins&&!isCreator)returnreply("âŒOnlygroupadminscanusethiscommand.");constmentionAll={mentions:participants.map(u=>u.id)};//Ifnomessageorreplyisprovidedif(!q&&!m.quoted){returnreply("âŒPleaseprovideamessageorreplytoamessagetotagallmembers.");}//Ifareplytoamessageif(m.quoted){consttype=m.quoted.mtype||'';//Ifit'satextmessage(extendedTextMessage)if(type==='extendedTextMessage'){returnawaitconn.sendMessage(from,{text:m.quoted.text||'Nomessagecontentfound.',...mentionAll},{quoted:mek});}//Handlemediamessagesif(['imageMessage','videoMessage','audioMessage','stickerMessage','documentMessage'].includes(type)){try{constbuffer=awaitm.quoted.download?.();if(!buffer)returnreply("âŒFailedtodownloadthequotedmedia.");letcontent;switch(type){case"imageMessage":content={image:buffer,caption:m.quoted.text||"ğŸ“·Image",...mentionAll};break;case"videoMessage":content={video:buffer,caption:m.quoted.text||"ğŸ¥Video",gifPlayback:m.quoted.message?.videoMessage?.gifPlayback||false,...mentionAll};break;case"audioMessage":content={audio:buffer,mimetype:"audio/mp4",ptt:m.quoted.message?.audioMessage?.ptt||false,...mentionAll};break;case"stickerMessage":content={sticker:buffer,...mentionAll};break;case"documentMessage":content={document:buffer,mimetype:m.quoted.message?.documentMessage?.mimetype||"application/octet-stream",fileName:m.quoted.message?.documentMessage?.fileName||"file",caption:m.quoted.text||"",...mentionAll};break;}if(content){returnawaitconn.sendMessage(from,content,{quoted:mek});}}catch(e){console.error("Mediadownload/senderror:",e);returnreply("âŒFailedtoprocessthemedia.Sendingastextinstead.");}}//Fallbackforanyothermessagetypereturnawaitconn.sendMessage(from,{text:m.quoted.text||"ğŸ“¨Message",...mentionAll},{quoted:mek});}//Ifnoquotedmessage,butadirectmessageissentif(q){//IfthedirectmessageisaURL,senditasamessageif(isUrl(q)){returnawaitconn.sendMessage(from,{text:q,...mentionAll},{quoted:mek});}//Otherwise,justsendthetextwithoutthecommandnameawaitconn.sendMessage(from,{text:q,//Sendsthemessagewithoutthecommandname...mentionAll},{quoted:mek});}}catch(e){console.error(e);reply(`âŒ*ErrorOccurred!!*\n\n${e.message}`);}});