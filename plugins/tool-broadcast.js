const{cmd,commands}=require('../command');constconfig=require('../config');constprefix=config.PREFIX;constfs=require('fs');const{getBuffer,getGroupAdmins,getRandom,h2k,isUrl,Json,sleep,fetchJson}=require('../lib/functions2');const{writeFileSync}=require('fs');constpath=require('path');cmd({pattern:"broadcast",category:"group",desc:"Botmakesabroadcastinallgroups",filename:__filename,use:"<textforbroadcast.>"},async(conn,mek,m,{q,isGroup,isAdmins,reply})=>{try{if(!isGroup)returnreply("âŒThiscommandcanonlybeusedingroups!");if(!isAdmins)returnreply("âŒYouneedtobeanadmintobroadcastinthisgroup!");if(!q)returnreply("âŒProvidetexttobroadcastinallgroups!");letallGroups=awaitconn.groupFetchAllParticipating();letgroupIds=Object.keys(allGroups);//ExtractgroupIDsreply(`ğŸ“¢SendingBroadcastTo${groupIds.length}Groups...\nâ³EstimatedTime:${groupIds.length*1.5}seconds`);for(letgroupIdofgroupIds){try{awaitsleep(1500);//Avoidratelimitsawaitconn.sendMessage(groupId,{text:q});//Sendsonlytheprovidedtext}catch(err){console.log(`âŒFailedtosendbroadcastto${groupId}:`,err);}}returnreply(`âœ…Successfullysentbroadcastto${groupIds.length}groups!`);}catch(err){awaitm.error(`âŒError:${err}\n\nCommand:broadcast`,err);}});