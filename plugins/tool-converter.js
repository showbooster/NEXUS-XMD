constconverter=require('../data/converter');conststickerConverter=require('../data/sticker-converter');const{cmd}=require('../command');cmd({pattern:'convert',alias:['sticker2img','stoimg','stickertoimage','s2i'],desc:'Convertstickerstoimages',category:'media',react:'ğŸ–¼ï¸',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!message.quoted){returnawaitclient.sendMessage(from,{text:"âœ¨*StickerConverter*\n\nPleasereplytoastickermessage\n\nExample:`.convert`(replytosticker)"},{quoted:message});}if(message.quoted.mtype!=='stickerMessage'){returnawaitclient.sendMessage(from,{text:"âŒOnlystickermessagescanbeconverted"},{quoted:message});}//Sendprocessingmessageawaitclient.sendMessage(from,{text:"ğŸ”„Convertingstickertoimage..."},{quoted:message});try{conststickerBuffer=awaitmessage.quoted.download();constimageBuffer=awaitstickerConverter.convertStickerToImage(stickerBuffer);//Sendresultawaitclient.sendMessage(from,{image:imageBuffer,caption:">PoweredByNexustechâ˜£ï¸",mimetype:'image/png'},{quoted:message});}catch(error){console.error('Conversionerror:',error);awaitclient.sendMessage(from,{text:"âŒPleasetrywithadifferentsticker."},{quoted:message});}});cmd({pattern:'tomp3',desc:'Convertmediatoaudio',category:'audio',react:'ğŸµ',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!match.quoted){returnawaitclient.sendMessage(from,{text:"*ğŸ”ŠPleasereplytoavideo/audiomessage*"},{quoted:message});}if(!['videoMessage','audioMessage'].includes(match.quoted.mtype)){returnawaitclient.sendMessage(from,{text:"âŒOnlyvideo/audiomessagescanbeconverted"},{quoted:message});}if(match.quoted.seconds>300){returnawaitclient.sendMessage(from,{text:"â±ï¸Mediatoolong(max5minutes)"},{quoted:message});}//Sendprocessingmessageandstoreitawaitclient.sendMessage(from,{text:"ğŸ”„Convertingtoaudio..."},{quoted:message});try{constbuffer=awaitmatch.quoted.download();constext=match.quoted.mtype==='videoMessage'?'mp4':'m4a';constaudio=awaitconverter.toAudio(buffer,ext);//Sendresultawaitclient.sendMessage(from,{audio:audio,mimetype:'audio/mpeg'},{quoted:message});}catch(e){console.error('Conversionerror:',e.message);awaitclient.sendMessage(from,{text:"âŒFailedtoprocessaudio"},{quoted:message});}});cmd({pattern:'toptt',desc:'Convertmediatovoicemessage',category:'audio',react:'ğŸ™ï¸',filename:__filename},async(client,match,message,{from})=>{//Inputvalidationif(!match.quoted){returnawaitclient.sendMessage(from,{text:"*ğŸ—£ï¸Pleasereplytoavideo/audiomessage*"},{quoted:message});}if(!['videoMessage','audioMessage'].includes(match.quoted.mtype)){returnawaitclient.sendMessage(from,{text:"âŒOnlyvideo/audiomessagescanbeconverted"},{quoted:message});}if(match.quoted.seconds>60){returnawaitclient.sendMessage(from,{text:"â±ï¸Mediatoolongforvoice(max1minute)"},{quoted:message});}//Sendprocessingmessageawaitclient.sendMessage(from,{text:"ğŸ”„Convertingtovoicemessage..."},{quoted:message});try{constbuffer=awaitmatch.quoted.download();constext=match.quoted.mtype==='videoMessage'?'mp4':'m4a';constptt=awaitconverter.toPTT(buffer,ext);//Sendresultawaitclient.sendMessage(from,{audio:ptt,mimetype:'audio/ogg;codecs=opus',ptt:true},{quoted:message});}catch(e){console.error('PTTconversionerror:',e.message);awaitclient.sendMessage(from,{text:"âŒFailedtocreatevoicemessage"},{quoted:message});}});